"use strict";var CC=function(){this._init()};CC.prototype={fakeBoard:[],boardWith:521,boardHeight:577,pieceSize:57,boardLeft:0,boardTop:0,imgSequence:[],rootDir:"/images/",player:0,_init:function(){var e=this;this.fakeBoard=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,1,1,1,1,1,1,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.piece_name=["oo","rk","ra","rb","rn","rr","rc","rp","bk","ba","bb","bn","br","bc","bp"],this.piece_name_chn=["棋盘","红帥","红仕","红相","红馬","红車","红砲","红兵","黑将","黑士","黑象","黑馬","黑車","黑炮","黑卒"],this.fen="rnbakabnr/9/1c5c1/p1p1p1p1p/9/9/P1P1P1P1P/1C5C1/9/RNBAKABNR",this.squares=[],this.chessboard=$("#chessboard"),this.boardLeft=this.boardWith-9*this.pieceSize>>1,this.boardTop=this.boardHeight-10*this.pieceSize>>1,this.initPiece(this.fen);for(var i=0;i<256;i++)if(this.isOnBoard(i)){var t=$("<img/>");t.css({left:this.sqX(i),top:this.sqY(i)}),this.chessboard.append(t),this.imgSequence.push(t[0]),t[0].onmousedown=function(i){return function(){e.clickPiece(i)}}(i)}else this.imgSequence.push(null);this.drawPiece()},initPiece:function(e){var i,t=3,r=3,s=0;for(this.clearBoard();s<e.length;s++){if("/"==(i=e[s])){if(r++,t=2,r>12)break}else if(i>="a"&&i<="z"){if(t<=11){var n=this.pieceCode(i.toLocaleLowerCase());n>=0&&this.addPiece(this.coordXY(t,r),n+8)}}else if(i>="A"&&i<="Z"){if(t<=11){var n=this.pieceCode(i.toLocaleLowerCase());n>=0&&this.addPiece(this.coordXY(t,r),n+1)}}else if(i>="1"&&i<="9"){t+=i.charCodeAt()-48;continue}t++}},clearBoard:function(){for(var e=0;e<256;e++)this.squares.push(0)},isOnBoard:function(e){return 0!=this.fakeBoard[e]},fileX:function(e){return 15&e},rankY:function(e){return e>>4},coordXY:function(e,i){return e+(i<<4)},sqX:function(e){return this.boardLeft+(this.fileX(e)-3)*this.pieceSize},sqY:function(e){return this.boardTop+(this.rankY(e)-3)*this.pieceSize},diffColor:function(){},pieceCode:function(e){switch(e){case"k":return 0;case"a":return 1;case"b":return 2;case"n":return 3;case"r":return 4;case"c":return 5;case"p":return 6;default:return-1}},addPiece:function(e,i){this.squares[e]=i},drawPiece:function(){for(var e=0;e<256;e++)this.isOnBoard(e)&&$(this.imgSequence[e]).attr("src",this.rootDir+this.piece_name[this.squares[e]]+".gif")},clickPiece:function(e){alert(this.piece_name_chn[this.squares[e]])},movePiece:function(){}};var MoveRule=function(){};MoveRule.prototype={_init:function(){}};